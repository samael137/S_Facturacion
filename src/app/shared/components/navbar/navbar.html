<nav class="navbar" *ngIf="authService.isAuthenticated()">
  <div class="navbar-container">
    <!-- Logo -->
    <div class="navbar-brand">
      <div class="logo" routerLink="/dashboard">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
        </svg>
        <span class="logo-text">Sistema Facturación</span>
      </div>
    </div>

    <!-- Menu Desktop -->
    <div class="navbar-menu desktop-menu">
      <a 
        routerLink="/dashboard" 
        routerLinkActive="active"
        [routerLinkActiveOptions]="{exact: true}"
        class="nav-link"
        (click)="closeMenus()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        <span>Dashboard</span>
      </a>

      <a 
        routerLink="/facturas" 
        routerLinkActive="active"
        class="nav-link"
        (click)="closeMenus()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
        </svg>
        <span>Facturas</span>
      </a>

      <a 
        routerLink="/clientes" 
        routerLinkActive="active"
        class="nav-link"
        (click)="closeMenus()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        <span>Clientes</span>
      </a>

      <a 
        routerLink="/estadisticas" 
        routerLinkActive="active"
        class="nav-link"
        (click)="closeMenus()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="20" x2="18" y2="10"></line>
          <line x1="12" y1="20" x2="12" y2="4"></line>
          <line x1="6" y1="20" x2="6" y2="14"></line>
        </svg>
        <span>Estadísticas</span>
      </a>
    </div>

    <!-- User Menu Desktop -->
    <div class="navbar-user desktop-user">
      <button class="user-button" (click)="toggleUserMenu()">
        <div class="user-avatar">
          {{ authService.currentUser()?.nombre?.charAt(0) || 'U' }}
        </div>
        <div class="user-info">
          <div class="user-name">{{ authService.currentUser()?.nombre }}</div>
          <div class="user-email">{{ authService.currentUser()?.email }}</div>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" [class.rotate]="userMenuOpen">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </button>

      <!-- Dropdown Menu -->
      <div class="dropdown-menu" [class.show]="userMenuOpen">
        <div class="dropdown-header">
          <div class="dropdown-user-name">{{ authService.currentUser()?.nombre }} {{ authService.currentUser()?.apellido }}</div>
          <div class="dropdown-user-email">{{ authService.currentUser()?.email }}</div>
        </div>
        <div class="dropdown-divider"></div>
        <button class="dropdown-item" (click)="logout()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          Cerrar Sesión
        </button>
      </div>
    </div>

    <!-- Hamburger Button Mobile -->
    <button class="hamburger" (click)="toggleMenu()" [class.active]="menuOpen">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu" [class.show]="menuOpen">
    <div class="mobile-menu-header">
      <div class="mobile-user-info">
        <div class="user-avatar large">
          {{ authService.currentUser()?.nombre?.charAt(0) || 'U' }}
        </div>
        <div>
          <div class="mobile-user-name">{{ authService.currentUser()?.nombre }} {{ authService.currentUser()?.apellido }}</div>
          <div class="mobile-user-email">{{ authService.currentUser()?.email }}</div>
        </div>
      </div>
    </div>

    <div class="mobile-menu-divider"></div>

    <div class="mobile-menu-links">
      <a 
        routerLink="/dashboard" 
        routerLinkActive="active"
        [routerLinkActiveOptions]="{exact: true}"
        class="mobile-nav-link"
        (click)="closeMenus()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        <span>Dashboard</span>
      </a>

      <a 
        routerLink="/facturas" 
        routerLinkActive="active"
        class="mobile-nav-link"
        (click)="closeMenus()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
        </svg>
        <span>Facturas</span>
      </a>

      <a 
        routerLink="/clientes" 
        routerLinkActive="active"
        class="mobile-nav-link"
        (click)="closeMenus()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        <span>Clientes</span>
      </a>

      <a 
        routerLink="/estadisticas" 
        routerLinkActive="active"
        class="mobile-nav-link"
        (click)="closeMenus()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="20" x2="18" y2="10"></line>
          <line x1="12" y1="20" x2="12" y2="4"></line>
          <line x1="6" y1="20" x2="6" y2="14"></line>
        </svg>
        <span>Estadísticas</span>
      </a>
    </div>

    <div class="mobile-menu-divider"></div>

    <button class="mobile-logout-btn" (click)="logout()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
        <polyline points="16 17 21 12 16 7"></polyline>
        <line x1="21" y1="12" x2="9" y2="12"></line>
      </svg>
      Cerrar Sesión
    </button>
  </div>

  <!-- Overlay -->
  <div class="overlay" [class.show]="menuOpen || userMenuOpen" (click)="closeMenus()"></div>
</nav>